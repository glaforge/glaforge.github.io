<!doctype html><html lang=en-us><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="IE=edge"><title>Monitoring Website Changes with Workflows Cloud Functions and Sendgrid</title><link rel=preconnect href=https://fonts.googleapis.com><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link href="https://fonts.googleapis.com/css2?family=PT+Sans:ital,wght@0,400;0,700;1,400;1,700&family=Roboto+Slab:wght@800&display=swap" rel=stylesheet><link href=https://cdn.jsdelivr.net/npm/comic-mono@0.0.1/index.css rel=stylesheet><link rel=stylesheet href=/css/style.css></head><body><header><div><a href=https://glaforge.github.io/>â¯ Guillaume Laforge</a><nav><ul><li><a href=/>BLOG</a></li><li><a href=/talks>TALKS</a></li><li><a href=/about>ABOUT</a></li><li><a href=/contact>CONTACT</a></li></ul></nav></div></header><main><article><h1>Monitoring Website Changes with Workflows Cloud Functions and Sendgrid</h1><time datetime=2022-09-12T15:53:44>ğŸ“… 2022-09-12 ğŸ•‘ 15:53</time><div class=author>ğŸ–‹ by Guillaume Laforge</div><div class=tags><a href=/tags/google-cloud>google-cloud</a>
<a href=/tags/workflows>workflows</a>
<a href=/tags/serverless>serverless</a>
<a href=/tags/cloud-functions>cloud-functions</a>
<a href=/tags/secret-manager>secret-manager</a></div><div><p>Every year in France, around mid-September, there&rsquo;s a special weekend where everyone can visit some famous places, usually closed the rest of the year. That&rsquo;s &ldquo;<a href=https://journeesdupatrimoine.culture.gouv.fr/>JournÃ©e du Patrimoine</a>&rdquo;. For example, you can visit places like the <a href=https://www.elysee.fr/>ElysÃ©e Palace</a> or the <a href=https://www.gouvernement.fr/le-patrimoine-de-l-hotel-de-matignon>Matignon Palace</a>, if you want to see where the French president, or the French prime minister work. However, for some of those places, it&rsquo;s tricky to register online to book a slot, as there&rsquo;s always a high demand for them. Furthermore, you have to be there at the right time to register, and often, you don&rsquo;t even know when that day or time is! So I thought I could monitor the website of the ElysÃ©e Palace to see when the registration would open, by tracking changes on the ElysÃ©e website.</p><p>To monitor web page or website changes, there are a ton of online services available. There are often some limitations to the number of free requests, or to the frequency of the change checks. Being a developer on Google Cloud, I decided to write a simple solution that would take advantage of various Google Cloud services, namely:</p><ul><li><a href=https://cloud.google.com/workflows>Workflows</a>: to define the various steps of my site change workflow,</li><li><a href=https://cloud.google.com/scheduler>Cloud Scheduler</a>: to call execute my workflow on a regular basis,</li><li><a href=https://cloud.google.com/functions>Cloud Functions</a>: to compute a hash of the webpage, to see if the page changed,</li><li><a href=https://cloud.google.com/storage>Cloud Storage</a>: to store the hashes,</li><li><a href=https://sendgrid.com/>SendGrid</a> (not a Google Cloud product): to send me an email when changes have appeared,</li><li><a href=https://cloud.google.com/secret-manager>Secret Manager</a>: to store my SendGrid API key securely.</li></ul><p>Let&rsquo;s have a look first at a function that computes the hash of a webpage. As there&rsquo;s no hash function in the Workflows standard library, I decided to use a function to do that job. I used the Node.js runtime, with the crypto module, which contains a sha1 implementation:</p><div class=highlight><pre tabindex=0 style=background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#007020;font-weight:700>const</span> crypto <span style=color:#666>=</span> require(<span style=color:#4070a0>&#39;crypto&#39;</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>exports.checksum <span style=color:#666>=</span> (req, res) =&gt; {
</span></span><span style=display:flex><span>  <span style=color:#007020;font-weight:700>const</span> webpageBody <span style=color:#666>=</span> req.body.webpage;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#007020;font-weight:700>const</span> shasum <span style=color:#666>=</span> crypto.createHash(<span style=color:#4070a0>&#39;sha1&#39;</span>);
</span></span><span style=display:flex><span>  shasum.update(webpageBody);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#007020;font-weight:700>const</span> sha1 <span style=color:#666>=</span> shasum.digest(<span style=color:#4070a0>&#39;hex&#39;</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  res.status(<span style=color:#40a070>200</span>).send({sha1<span style=color:#666>:</span> sha1});
</span></span><span style=display:flex><span>};
</span></span></code></pre></div><p>The function receives the web page content from the workflow. Then I create the sha1 hash with that content, and return it in hexadecimal form, in a small JSON payload.</p><p>I created a Google Cloud Storage bucket to contain my web page hashes:</p><p><img src=/img/patrimoine/patrimoine-gcs.png alt></p><p>Since I&rsquo;m using SendGrid to notify me by email on changes, I store the API key securely in Secret Manager:</p><p><img src=/img/patrimoine/patrimoine-secret.png alt></p><p>Now let&rsquo;s zoom on our workflow, piece by piece.<br>First, I define some variables, like the name of my bucket, the name of my hashes text file, and I retrieve my SendGrid API key (see this previous <a href=https://glaforge.appspot.com/article/using-the-secret-manager-connector-for-workflows-to-call-an-authenticated-service>article about using Secret Manager with Workflows</a>):</p><div class=highlight><pre tabindex=0 style=background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#062873;font-weight:700>main</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span><span style=color:#062873;font-weight:700>params</span>:<span style=color:#bbb> </span>[input]<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span><span style=color:#062873;font-weight:700>steps</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span>- <span style=color:#062873;font-weight:700>assignment</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>        </span><span style=color:#062873;font-weight:700>assign</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>            </span>- <span style=color:#062873;font-weight:700>bucket</span>:<span style=color:#bbb> </span>hash_results<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>            </span>- <span style=color:#062873;font-weight:700>file_name</span>:<span style=color:#bbb> </span>hash.txt<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span>- <span style=color:#062873;font-weight:700>get_email_api_key</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>        </span><span style=color:#062873;font-weight:700>call</span>:<span style=color:#bbb> </span>googleapis.secretmanager.v1.projects.secrets.versions.accessString<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>        </span><span style=color:#062873;font-weight:700>args</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>            </span><span style=color:#062873;font-weight:700>secret_id</span>:<span style=color:#bbb> </span>SENDGRID_API_KEY<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>        </span><span style=color:#062873;font-weight:700>result</span>:<span style=color:#bbb> </span>EMAIL_API_KEY<span style=color:#bbb>
</span></span></span></code></pre></div><p>Then I read the content of the previous hash in GCS (you can also check this article on how to <a href=https://glaforge.appspot.com/article/reading-in-and-writing-a-json-file-to-a-storage-bucket-from-a-workflow>read and write JSON data to a file in a bucket from a workflow</a>):</p><div class=highlight><pre tabindex=0 style=background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#062873;font-weight:700>Â  Â  - read_hash_from_gcs</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span><span style=color:#062873;font-weight:700>Â  Â  Â  Â  call</span>:<span style=color:#bbb> </span>http.get<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span><span style=color:#062873;font-weight:700>Â  Â  Â  Â  args</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span><span style=color:#062873;font-weight:700>Â  Â  Â  Â  Â  Â  url</span>:<span style=color:#bbb> </span>${&#34;https://storage.googleapis.com/download/storage/v1/b/&#34; + bucket + &#34;/o/&#34; + file_name}<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span><span style=color:#062873;font-weight:700>Â  Â  Â  Â  Â  Â  auth</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span><span style=color:#062873;font-weight:700>Â  Â  Â  Â  Â  Â  Â  Â  type</span>:<span style=color:#bbb> </span>OAuth2<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span><span style=color:#062873;font-weight:700>Â  Â  Â  Â  Â  Â  query</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span><span style=color:#062873;font-weight:700>Â  Â  Â  Â  Â  Â  Â  Â  alt</span>:<span style=color:#bbb> </span>media<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span><span style=color:#062873;font-weight:700>Â  Â  Â  Â  result</span>:<span style=color:#bbb> </span>hash_from_gcs<span style=color:#bbb>
</span></span></span></code></pre></div><p>It&rsquo;s time to make a simple HTTP GET call to the website. Currently, the URL is hard-coded, but we could parameterize the workflow to get that URL from the workflow execution input parameters instead.</p><div class=highlight><pre tabindex=0 style=background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#bbb>    </span>- <span style=color:#062873;font-weight:700>retrieve_web_page</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>        </span><span style=color:#062873;font-weight:700>call</span>:<span style=color:#bbb> </span>http.get<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>        </span><span style=color:#062873;font-weight:700>args</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>           </span><span style=color:#062873;font-weight:700>url</span>:<span style=color:#bbb> </span>https://evenements.elysee.fr/<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>        </span><span style=color:#062873;font-weight:700>result</span>:<span style=color:#bbb> </span>web_page<span style=color:#bbb>
</span></span></span></code></pre></div><p>Once I retrieved the content of the URL (the result of that request is stored in the web_page variable), I can compute my hash, by calling my cloud function:</p><div class=highlight><pre tabindex=0 style=background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#bbb>    </span>- <span style=color:#062873;font-weight:700>compute_hash</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>        </span><span style=color:#062873;font-weight:700>call</span>:<span style=color:#bbb> </span>http.post<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>        </span><span style=color:#062873;font-weight:700>args</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>            </span><span style=color:#062873;font-weight:700>url</span>:<span style=color:#bbb> </span>https://europe-west1-patrimoine-check.cloudfunctions.net/checksum<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>            </span><span style=color:#062873;font-weight:700>body</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>                </span><span style=color:#062873;font-weight:700>webpage</span>:<span style=color:#bbb> </span>${web_page.body}<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>        </span><span style=color:#062873;font-weight:700>result</span>:<span style=color:#bbb> </span>hash_result<span style=color:#bbb>
</span></span></span></code></pre></div><p>That&rsquo;s where we introduce some branching in the workflow. If the web page hasn&rsquo;t changed we finish early, but if it has changed, then we&rsquo;re going to store the new hash in GCS:</p><div class=highlight><pre tabindex=0 style=background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#062873;font-weight:700>Â  Â  - assign_hashes</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span><span style=color:#062873;font-weight:700>Â  Â  Â  Â  assign</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span><span style=color:#062873;font-weight:700>Â  Â  Â  Â  Â  Â  - old_hash</span>:<span style=color:#bbb> </span>${hash_from_gcs.body.sha1}<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span><span style=color:#062873;font-weight:700>Â  Â  Â  Â  Â  Â  - new_hash</span>:<span style=color:#bbb> </span>${hash_result.body.sha1}<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span><span style=color:#062873;font-weight:700>Â  Â  Â  Â  Â  Â  - hash_msg</span>:<span style=color:#bbb> </span>${&#34;Old hash = &#34; + old_hash + &#34; / New hash = &#34; + new_hash}<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span><span style=color:#062873;font-weight:700>Â  Â  - conditionalSwitch</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span><span style=color:#062873;font-weight:700>Â  Â  Â  Â  switch</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span><span style=color:#062873;font-weight:700>Â  Â  Â  Â  - condition</span>:<span style=color:#bbb> </span>${new_hash != old_hash}<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span><span style=color:#062873;font-weight:700>Â  Â  Â  Â  Â  next</span>:<span style=color:#bbb> </span>write_hash_to_gcs<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span><span style=color:#062873;font-weight:700>Â  Â  Â  Â  next</span>:<span style=color:#bbb> </span>returnOutput<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span><span style=color:#062873;font-weight:700>Â  Â  - write_hash_to_gcs</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span><span style=color:#062873;font-weight:700>Â  Â  Â  Â  call</span>:<span style=color:#bbb> </span>http.post<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span><span style=color:#062873;font-weight:700>Â  Â  Â  Â  args</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span><span style=color:#062873;font-weight:700>Â  Â  Â  Â  Â  Â  url</span>:<span style=color:#bbb> </span>${&#34;https://storage.googleapis.com/upload/storage/v1/b/&#34; + bucket + &#34;/o&#34;}<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span><span style=color:#062873;font-weight:700>Â  Â  Â  Â  Â  Â  auth</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span><span style=color:#062873;font-weight:700>Â  Â  Â  Â  Â  Â  Â  Â  type</span>:<span style=color:#bbb> </span>OAuth2<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span><span style=color:#062873;font-weight:700>Â  Â  Â  Â  Â  Â  query</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span><span style=color:#062873;font-weight:700>Â  Â  Â  Â  Â  Â  Â  Â  name</span>:<span style=color:#bbb> </span>${file_name}<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span><span style=color:#062873;font-weight:700>Â  Â  Â  Â  Â  Â  body</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span><span style=color:#062873;font-weight:700>Â  Â  Â  Â  Â  Â  Â  Â  sha1</span>:<span style=color:#bbb> </span>${hash_result.body.sha1}<span style=color:#bbb>
</span></span></span></code></pre></div><p>I log the fact the website has changed, and I&rsquo;m calling the SendGrid API (like in this article on using SendGrid for sending emails from Workflows):</p><div class=highlight><pre tabindex=0 style=background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#bbb>    </span>- <span style=color:#062873;font-weight:700>site_changed_log</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>        </span><span style=color:#062873;font-weight:700>call</span>:<span style=color:#bbb> </span>sys.log<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>        </span><span style=color:#062873;font-weight:700>args</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>            </span><span style=color:#062873;font-weight:700>text</span>:<span style=color:#bbb> </span>Website has changed<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span>- <span style=color:#062873;font-weight:700>notify_by_email</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>        </span><span style=color:#062873;font-weight:700>call</span>:<span style=color:#bbb> </span>http.post<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>        </span><span style=color:#062873;font-weight:700>args</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>            </span><span style=color:#062873;font-weight:700>url</span>:<span style=color:#bbb> </span>https://api.sendgrid.com/v3/mail/send<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>            </span><span style=color:#062873;font-weight:700>headers</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>                </span><span style=color:#062873;font-weight:700>Content-Type</span>:<span style=color:#bbb> </span><span style=color:#4070a0>&#34;application/json&#34;</span><span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>                </span><span style=color:#062873;font-weight:700>Authorization</span>:<span style=color:#bbb> </span>${&#34;Bearer &#34; + EMAIL_API_KEY}<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>            </span><span style=color:#062873;font-weight:700>body</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>                </span><span style=color:#062873;font-weight:700>personalizations</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>                    </span>- <span style=color:#062873;font-weight:700>to</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>                        </span>- <span style=color:#062873;font-weight:700>email</span>:<span style=color:#bbb> </span>me@gmail.com<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>                </span><span style=color:#062873;font-weight:700>from</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>                    </span><span style=color:#062873;font-weight:700>email</span>:<span style=color:#bbb> </span>you@gmail.com<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>                </span><span style=color:#062873;font-weight:700>subject</span>:<span style=color:#bbb> </span><span style=color:#4070a0>&#34;ElysÃ©e, page mise Ã  jour&#34;</span><span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>                </span><span style=color:#062873;font-weight:700>content</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>                    </span>- <span style=color:#062873;font-weight:700>type</span>:<span style=color:#bbb> </span>text/plain<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>                      </span><span style=color:#062873;font-weight:700>value</span>:<span style=color:#bbb> </span><span style=color:#4070a0>&#34;La page de l&#39;Ã‰lysÃ©e a Ã©tÃ© mise Ã  jour&#34;</span><span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span>- <span style=color:#062873;font-weight:700>log_hashes</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>        </span><span style=color:#062873;font-weight:700>call</span>:<span style=color:#bbb> </span>sys.log<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>        </span><span style=color:#062873;font-weight:700>args</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>            </span><span style=color:#062873;font-weight:700>text</span>:<span style=color:#bbb> </span>${hash_msg}<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span>- <span style=color:#062873;font-weight:700>returnOutput</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>            </span><span style=color:#062873;font-weight:700>return</span>:<span style=color:#bbb> </span>${hash_msg}<span style=color:#bbb>
</span></span></span></code></pre></div><p>The workflows need to be invoked at a regular interval of time. Workflows can be configured to be invoked on a schedule via Cloud Scheduler (again, check this article on scheduling workflow executions). I configured my workflow to be triggered every minute, with the * * * * * cron pattern.<br><img src=/img/patrimoine/patrimoine-schedule.png alt></p><p>And voila! I have my little workflow being invoked every minute to check if a web page has changed, and send me an email if so!</p><p>To be honest with you, the workflow worked perfectly&mldr; but the true story is that I wasn&rsquo;t monitoring the right URL, I should have monitored the front page instead. Furthermore, the page I was monitoring included some dynamic JavaScript code, but the HTML fetched wasn&rsquo;t really changing. I missed the registration window, and all the slots filled super rapidly before I even had the time to register my family for a visit! Shame on me, better check my URL next time, or create webpage screenshots with a headless Chrome running in Cloud Run or in Cloud Functions! Or, of course, use online services that have solved those problems with their years of experience! Hopefully, next year, I won&rsquo;t miss the registration! But it was fun to glue together all those useful services from Google Cloud, to solve a concrete problem.</p></div></article></main><aside><div><div><h3>LATEST POSTS</h3></div><div><ul><li><a href=/posts/calculating-your-potential-reach-on-mastodon-with-google-cloud-workflows-orchestrating-the-mastodon-apis/>Calculating your potential reach on Mastodon with Google Cloud Workflows orchestrating the Mastodon APIs</a></li><li><a href=/posts/turning-a-website-into-a-desktop-application/>Turning a Website Into a Desktop Application</a></li><li><a href=/posts/apis-we-have-a-problem-json/>APIs, we have a Problem JSON</a></li><li><a href=/posts/workflows-tips-and-tricks/>Workflows Tips and Tricks</a></li><li><a href=/posts/retrieve-youtube-views-count-with-youtubedl-jq-and-a-docker-container/>Retrieve YouTube views count with youtubeDL, JQ, and a Docker container</a></li></ul></div></div></aside><footer><div class=social><a href=https://uwyn.net/@glaforge><img src=/img/icons/mastodon-black.svg alt="Mastodon logo" width=42px></a>
<a href=https://twitter.com/@glaforge><img src=/img/icons/twitter-black.svg alt="Twitter logo" width=50px></a>
<a href=https://github.com/glaforge><img src=/img/icons/github-black.svg alt="Github logo" width=45px></a>
<a href=https://linkedin.com/in/glaforge><img src=/img/icons/linkedin-black.svg alt="LinkedIn logo" width=43px></a>
<a href=https://speakerdeck.com/glaforge><img src=/img/icons/speakerdeck-black.svg alt="SpeakerDeck logo" width=60px></a></div><p>&copy; 2023 <a href=/about>Guillaume Laforge</a></p></footer></body></html>