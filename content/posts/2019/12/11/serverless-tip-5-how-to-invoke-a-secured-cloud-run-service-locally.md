---
title: "Serverless tip #5 — How to invoke a secured Cloud Run service locally"
date: 2019-12-11T16:36:39+01:00
tags:
- serverless
- google-cloud
- cloud-run
- tips

similar:
  - "posts/2019/12/05/serverless-tip-4-discover-the-full-URL-of-your-deployed-cloud-run-services-with-gcloud-format-flag.md"
  - "posts/2022/09/27/a-cloud-run-service-in-go-calling-a-workflows-callback-endpoint.md"
  - "posts/2023/05/30/getting-started-with-the-PaLM-API-in-the-java-ecosystem.md"
---

Requirements:

-   an existing Google Cloud Platform account with a project
-   you have enabled the Cloud Run service and already deployed a container image
-   your local environment's gcloud is already configured to point at your GCP project

By default, when you deploy a [Cloud Run](https://cloud.run/) service, it is secured by default, unless you use the --allow-unauthenticated flag when using the gcloud command-line (or the appropriate checkbox on the Google Cloud Console).

But once deployed, if you want to call it locally from your development machine, for testing purpose, you'll have to be authenticated.

If you look at the Cloud Console, alongside the URL of the service, you can hover the little icon next to the URL, and you'll see the a pop-up showing how you can invoke that service with a curl command:

![](/img/serverless-tips/st5-cr-call-authenticated-service.png)

```bash
curl -H \
    "Authorization: Bearer $(gcloud auth print-identity-token)" \
    https://authenticated-x2rq3lgmra-uc.a.run.app
```

Note how a bearer token generated by the gcloud command is passed as header to the curl request.

More information

-   [https://cloud.run](https://cloud.run/), the serverless container platform
-   [Authentication overview documentation](https://cloud.google.com/run/docs/authenticating/overview)
-   [Unauthenticated invocations](https://cloud.google.com/run/docs/authenticating/public) of your services
-   [gcloud auth print-identity-token](https://cloud.google.com/sdk/gcloud/reference/auth/print-identity-token)